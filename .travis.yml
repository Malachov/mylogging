language: python
cache: pip

python:
  - "3.6"
  - "3.7"
  - "3.8"

git:
  depth: 25
  quiet: true

install:
  - pip install pip --upgrade
  - pip install -r requirements.txt
  - pip install -r requirements_dev.txt
  - python setup.py install

script: pytest --cov=mylogging tests/

deploy:
  - provider: pypi
    skip_cleanup: true
    skip_existing: true
    distributions: "sdist bdist_wheel"
    username: "__token__"
    password:
      secure: "qqtpCMci1gd6T+IO6VMo6qBlfvrqekv0hWPpnbtIS0YlNzVmLUFa8NLxTiCabHD1Uxi+iU/9aYh6x2l1nD/2lCmdDa+B7DSaBA7JiMc5MDJh+zDP1tYJ4FJmbLWGQdzOasVVU9GjNcvONBsw8X3WcqGkVCJSa+fy7TP0qk+/7fvZ6vG5kOkaFPKhzMOqrjxJDK9Vh7rfeVnH8LGWjmIPVaWvF7KTiXUDGfFqMS8FVsxIELGWufyHs29ocj5+8jBM77kHpnsUst9/miws0YHTpTOtBC7RvlVL7/O4JVm09Yt3+O3H9a376zJRbPUKTl+JNymC2aWpxWWbORdvUaiYF3kl9abOLg10irfVO6o9e71OTnox279US+Cw7yNiJYOlHfIBEVyWJ6wwkRd7dSL2YWnXomyj8pI6u31a4yt9Q8UTfDkQVsic1DbdWaqnMr5a3J1c1xqrjUlofSPFD+htLJhI/1S5/PanL3ToyDYpchJU//r4uQjHe5swj4x/63cmkdtl2HYdDQvCayFs5/BVh6IMQhKgmyaciUnKP//VG9BMTf4Z99bgYcHnJynwyHSO/8BkYprDcTwEj+viEiXmslzO82JAI0lgdGB9UG6zvNmD4IZ3Z7nv3BBtiNtVVbxG7gyNUUpdXpMNcV2GDjWhiesL4LY4lPjXYff6ncavIYs="
    on:
      tags: true
      python: "3.7"
  - provider: releases
    github-token: $GITHUB_TOKEN
    skip_cleanup: false
    overwrite: true
    on:
      tags: true
      python: "3.7"

after_success:
  - bash <(curl -s https://codecov.io/bash)
